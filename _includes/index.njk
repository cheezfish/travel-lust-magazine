---
layout: 'layout.njk'
title: 'Home'
---

{# This code finds the featured issue and separates it from the archive #}
{% set issues = collections.all | reverse %}
{% set featuredIssue = issues | find("data.isFeatured", true) %}
{% set archivedIssues = issues | filter("data.isFeatured", false) %}

{# --- FEATURED ISSUE SECTION --- #}
{% if featuredIssue %}
<section class="featured-issue issue">
    <h2>Current Featured Issue</h2>
    <article>
        <h3>{{ featuredIssue.data.title }}</h3>
        <p class="issue-date">Published on: {{ featuredIssue.date | readableDate }}</p>
        {% if featuredIssue.data.summary %}
            <p>{{ featuredIssue.data.summary }}</p>
        {% endif %}
        
        {# THIS IS THE FIX: Link to the issue's page URL #}
        <a href="{{ featuredIssue.url }}" class="issue-button-primary">Read This Issue</a>
    </article>
</section>
{% else %}
    <p>Welcome! The next issue is coming soon.</p>
{% endif %}


{# --- ARCHIVE SECTION --- #}
<section class="archive">
    <h2>Archive</h2>
    <ul class="archive-list">
        {% for issue in archivedIssues %}
            <li>
                {# THIS IS THE FIX: This link now also goes to the issue's page #}
                <a href="{{ issue.url }}">{{ issue.data.title }}</a> 
                <span class="issue-date">- {{ issue.date | readableDate }}</span>
            </li>
        {% else %}
            <li>No archived issues yet.</li>
        {% endfor %}
    </ul>
</section>